<html>
<head>
<title>How to Build a Kubernetes Cluster in GKE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在GKE建立Kubernetes集群</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/how-to-build-a-kubernetes-cluster-in-gke#2020-05-11">https://www.fairwinds.com/blog/how-to-build-a-kubernetes-cluster-in-gke#2020-05-11</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>本系列面向刚接触库伯内特和GKE的工程师。它提供了Kubernetes 、<a href="/blog/getting-started-with-kubernetes-architecture-basics-definitions" rel=" noopener">架构基础和定义</a>的<a href="/blog/what-problems-does-kubernetes-solve" rel=" noopener">基本概述，以及构建Kubernetes集群和</a><a href="/blog/how-to-deploy-multi-tiered-web-application-with-kubernetes" rel=" noopener">构建您的第一个多层webapp </a>的快速入门。</p>

<p>本博客将向您展示如何与GKE一起启动并运行您的第一个Kubernetes集群。</p>
<p>去console.cloud.google.com的谷歌云平台。如果你需要注册一个账户，这是非常简单的。谷歌会给你免费的积分。</p>
<p>单击左上角的汉堡，向下滚动到Kubernetes引擎，然后单击集群。</p>
<p><img src="../Images/7640f7550f84e3e380152f63f7ef3d23.png" alt="Goolge Cloud Platform Kubernetes Engine" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=488&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 488w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=975&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 975w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=1463&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 1463w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=1950&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 1950w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=2438&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 2438w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=2925&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png 2925w" sizes="(max-width: 975px) 100vw, 975px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png?width=975&amp;name=Goolge%20Cloud%20Platform%20Kubernetes%20Engine.png"/></p>
<p>您将看到没有创建任何集群，因此您将单击“create cluster”。</p>
<p><img src="../Images/93ee6713e91c68951dada49d42b9db06.png" alt="Kubernetes clusters create a cluster" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=307&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 307w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=614&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 614w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=921&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 921w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=1228&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 1228w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=1535&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 1535w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=1842&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png 1842w" sizes="(max-width: 614px) 100vw, 614px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20clusters%20create%20a%20cluster.png?width=614&amp;name=Kubernetes%20clusters%20create%20a%20cluster.png"/></p>
<p>对于您的第一个集群来说，默认设置基本上是可以的。因为您可能会使用Google提供的免费积分，所以您会希望通过使用我的第一个集群选项来最大限度地降低成本。</p>
<p>在右侧，单击我的第一个集群。</p>
<p><img src="../Images/9277bbf20b4ecebc6b5b625b67d7d09e.png" alt="Cluster basics" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=385&amp;name=Cluster%20basics.png 385w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=770&amp;name=Cluster%20basics.png 770w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=1155&amp;name=Cluster%20basics.png 1155w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=1540&amp;name=Cluster%20basics.png 1540w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=1925&amp;name=Cluster%20basics.png 1925w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=2310&amp;name=Cluster%20basics.png 2310w" sizes="(max-width: 770px) 100vw, 770px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Cluster%20basics.png?width=770&amp;name=Cluster%20basics.png"/></p>
<p>对于您的第一个集群，只需使用默认设置。随着Kubernetes越来越先进，所提供的选项将变得更有意义，比如选择节点的数量和大小。您可以跳到“查看”并单击左下方的“创建”。</p>
<p><img src="../Images/aa57bee95b9cfb71937f9586e95393a7.png" alt="My First Cluster" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=488&amp;name=My%20First%20Cluster.png 488w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=975&amp;name=My%20First%20Cluster.png 975w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=1463&amp;name=My%20First%20Cluster.png 1463w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=1950&amp;name=My%20First%20Cluster.png 1950w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=2438&amp;name=My%20First%20Cluster.png 2438w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=2925&amp;name=My%20First%20Cluster.png 2925w" sizes="(max-width: 975px) 100vw, 975px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/My%20First%20Cluster.png?width=975&amp;name=My%20First%20Cluster.png"/></p>
<p>在创建集群时，您会看到一个旋转的轮子——大约需要3-5分钟集群才会启动。</p>
<p>如果您曾经从零开始创建过Kubernetes集群，那么您会确切地知道需要多少时间。当您创建第一个集群时，Google会在幕后处理所有这些事情。</p>
<p><img src="../Images/acb76f49e09aa586503a825c60645616.png" alt="Kubernetes cluster-1 screenshot" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=488&amp;name=Kubernetes%20cluster-1%20screenshot.png 488w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=975&amp;name=Kubernetes%20cluster-1%20screenshot.png 975w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=1463&amp;name=Kubernetes%20cluster-1%20screenshot.png 1463w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=1950&amp;name=Kubernetes%20cluster-1%20screenshot.png 1950w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=2438&amp;name=Kubernetes%20cluster-1%20screenshot.png 2438w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=2925&amp;name=Kubernetes%20cluster-1%20screenshot.png 2925w" sizes="(max-width: 975px) 100vw, 975px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Kubernetes%20cluster-1%20screenshot.png?width=975&amp;name=Kubernetes%20cluster-1%20screenshot.png"/></p>
<p>一旦您的集群准备就绪，您会在集群名称旁边看到一个绿色复选标记。如果您使用上一个屏幕的默认设置，Google将命名您的集群。在这种情况下是<code> cluster-1.</code></p>
<p>启动并运行后，有两种方法可以验证您是否可以连接到集群。最简单的方法是使用谷歌云控制台。</p>
<p>点击右边的连接按钮。您将看到一个可以拷贝gcloud命令的地方。这里假设您已经安装了gcloud命令行和kubectl实用程序。如果你还没有安装这些或者想更快上手，点击按钮run in cloud shell。</p>
<p><img src="../Images/f5cd6b6586a4d03d85cb8dc81529c45b.png" alt="Connect to the cluster" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=488&amp;name=Connect%20to%20the%20cluster.png 488w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=975&amp;name=Connect%20to%20the%20cluster.png 975w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=1463&amp;name=Connect%20to%20the%20cluster.png 1463w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=1950&amp;name=Connect%20to%20the%20cluster.png 1950w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=2438&amp;name=Connect%20to%20the%20cluster.png 2438w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=2925&amp;name=Connect%20to%20the%20cluster.png 2925w" sizes="(max-width: 975px) 100vw, 975px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/Connect%20to%20the%20cluster.png?width=975&amp;name=Connect%20to%20the%20cluster.png"/></p>
<p>这将在您的浏览器中打开一个云控制台。您可以看到，它自动填充了为我们的Kubernetes集群进行身份验证所需的命令。<img src="../Images/ec2bbca42069b73381e867997934fea3.png" alt="GKE Shell Terminal" srcset="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=488&amp;name=GKE%20Shell%20Terminal.png 488w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=975&amp;name=GKE%20Shell%20Terminal.png 975w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=1463&amp;name=GKE%20Shell%20Terminal.png 1463w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=1950&amp;name=GKE%20Shell%20Terminal.png 1950w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=2438&amp;name=GKE%20Shell%20Terminal.png 2438w, https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=2925&amp;name=GKE%20Shell%20Terminal.png 2925w" sizes="(max-width: 975px) 100vw, 975px" data-original-src="https://www.fairwinds.com/hs-fs/hubfs/Blog%20Images/GKE%20Shell%20Terminal.png?width=975&amp;name=GKE%20Shell%20Terminal.png"/></p>
<p>要运行这个命令，只需按回车键。</p>
<p>您可以运行一些快速的kubectl命令来验证您可以连接到您的集群。</p>
<p>您可以运行的第一个是<code>kubectl config current-context.</code>,它应该回显我们连接到Kubernetes集群的当前上下文。</p>
<pre><code>danielle@cloudshell:~ (trial-275916)$ kubectl config current-context
gke_trial-275916_us-central1-c_cluster-1</code></pre>
<p>在现实世界中，您可能同时连接到任意数量的集群。您可以使用kubectl config命令在集群之间切换上下文。如果您使用它在生产集群和开发集群之间切换，请小心。您可以让您的当前上下文指向一个生产集群，并打算在您的开发集群中运行。请随意使用该命令。</p>
<p>您可以看到现在您已经连接到了刚刚创建的Kubernetes集群。您可以通过运行<code> kubectl get nodes.</code> <code> </code>来验证Kubernetes集群是否有工作空间</p>
<pre><code>danielle@cloudshell:~ (trial-275916)$ kubectl get nodes
NAME                                       STATUS   ROLES    AGE   VERSION
gke-cluster-1-default-pool-45c619a9-13l8   Ready       51m   v1.14.10-gke.27
gke-cluster-1-default-pool-45c619a9-hrfr   Ready       51m   v1.14.10-gke.27
gke-cluster-1-default-pool-45c619a9-x7q9   Ready       51m   v1.14.10-gke.27
</code></pre>
<p>您可以看到，在GKE有一个三节点Kubernetes群集。</p>

<p><span class="hs-cta-wrapper" id="hs-cta-wrapper-e68d92d3-c876-4525-b775-6123e46c7212"><span class="hs-cta-node hs-cta-e68d92d3-c876-4525-b775-6123e46c7212" id="hs-cta-e68d92d3-c876-4525-b775-6123e46c7212"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/e68d92d3-c876-4525-b775-6123e46c7212"><img class="hs-cta-img" id="hs-cta-img-e68d92d3-c876-4525-b775-6123e46c7212" src="../Images/ff6b63b515c18edd13b80bc25f17c2de.png" alt="Download the Kubernetes Best Practices Whitepaper" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/e68d92d3-c876-4525-b775-6123e46c7212.png"/></a></span>T6】</span></p></span></div>    
</body>
</html>