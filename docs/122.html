<html>
<head>
<title>Why Fixing Kubernetes Configuration Inconsistencies is Critical for Multi-tenant and Multi-cluster Environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么修复Kubernetes配置不一致对于多租户和多集群环境至关重要</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/why-fixing-kubernetes-configuration-inconsistencies-is-critical-for-multi-tenant-and-multi-cluster-environments#2022-12-08">https://www.fairwinds.com/blog/why-fixing-kubernetes-configuration-inconsistencies-is-critical-for-multi-tenant-and-multi-cluster-environments#2022-12-08</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>在大多数情况下，组织用一个应用程序来试验Kubernetes。一旦成功，这些组织将致力于跨多个应用、开发和运营团队的Kubernetes。通常是自助服务模式，开发运维人员和基础架构负责人会让许多用户跨许多不同的集群进行构建和部署。</p>

<p>虽然自助服务模式消除了应用程序团队和基础架构之间的障碍，但由于工作负载可能配置不一致或需要手动部署，因此管理群集配置变得非常困难。如果没有护栏，集装箱和集群之间的配置可能会有差异，这对于识别、纠正和保持一致性是一个挑战。当用户从在线示例(如StackOverflow或其他开发团队)中复制并粘贴YAML配置时，工作负载被过度配置以“让事情正常工作”，或者如果没有现有的流程来验证配置，就会发生这种错误配置。</p>
<blockquote>
<p><span> 63%的部署允许其工作负载作为</span> <a href="https://www.fairwinds.com/blog/how-to-identify-kubernetes-pods-running-root">根用户</a> <br/> <span>来源:Fairwinds Insights对数百个生产级集群的调查结果</span></p>
</blockquote>
<p>配置不一致的负面后果非常重要，不容忽视:</p>
<ul>
<li aria-level="1">
<p>安全漏洞:错误配置会导致权限提升、易受攻击的映像、来自不可信存储库或容器的映像以root用户身份运行。69%的公司由于Kubernetes的错误配置发生过安全事故。来源:<a href="https://enterprisersproject.com/article/2020/6/kubernetes-statistics-2020" rel="noopener" target="_blank">企业项目</a>。</p>
</li>
<li aria-level="1">
<p>效率:由于使用了太多的资源或者陈旧的工作负载没有得到清理，成本可能会攀升得太高。45%的容器使用&lt;30% of requested Memory (inefficiency). Source: <a href="https://www.datadoghq.com/container-report/" rel="noopener" target="_blank"> DataDog容器报告</a>。</p>
</li>
<li aria-level="1">
<p>可靠性:可能存在围绕活动或就绪性调查的可靠性问题，或者可扩展性问题(由于缺乏PodDisruptionBudgets或HorizontalPodAutoscalers，扩展不够或扩展过于频繁)导致您的应用程序或服务停机。</p>
</li>
</ul>
<blockquote>
<p><strong> <span> 29%的部署缺乏就绪性调查</span> </strong> <br/> <span>来源:Fairwinds Insights对数百个生产级集群的调查结果</span></p>
</blockquote>
<p>手动识别这些错误配置非常容易出错，并且会很快让运营团队不堪代码审查的重负。</p>
<h3><strong>技术影响</strong></h3>
<ul>
<li aria-level="1">
<p>未解决的容器漏洞</p>
</li>
<li aria-level="1">
<p>过度许可的部署</p>
</li>
<li aria-level="1">
<p>缺少健康探测器</p>
</li>
<li aria-level="1">
<p>不适当的资源请求和限制</p>
</li>
</ul>
<h3><strong>业务影响</strong></h3>
<ul>
<li aria-level="1">
<p>安全风险增加</p>
</li>
<li aria-level="1">
<p>应用停机时间</p>
</li>
<li aria-level="1">
<p>云成本超支</p>
</li>
<li aria-level="1">
<p>不合规</p>
</li>
</ul>
<h2><strong>为什么实施一致的配置模式对Kubernetes至关重要</strong></h2>
<p>随着团队在整个组织中部署Kubernetes，DevOps团队不可能手动编写或审查进入集群的每个docker文件和Kubernetes清单。这就是实施配置模式对Kubernetes的成功至关重要的地方。如果没有一套一致的标准，工程团队将不可避免地产生安全漏洞，过度消耗计算资源，并引入嘈杂的工作负载。然后，DevOps团队很快耗尽精力来响应页面和灭火，几乎没有时间对基础架构进行实质性改进。升级也可能成为一个主要问题。组织在可避免的错误配置和意外中断上浪费金钱。</p>
<h2>如何加强与Kubernetes政策的一致性</h2>
<p>当与一个工程师团队管理多集群环境时，创建一致性需要您建立Kubernetes策略来加强安全性、效率和可靠性。那么，如何加强一致性呢？实现一致配置的一个关键工具是<a href="/kubernetes-policy-enforcement" rel="noopener"> Kubernetes策略</a>。策略和策略实施工具允许您定义部署的操作防护，以及特定的法规遵从性和安全性要求。这些策略通常被称为策略即代码，使平台工程和运营团队能够围绕一组通用的规则、模式和最佳实践与其他利益相关方协作，以供IT和工程团队遵循。</p>
<p>我们撰写了一篇<a href="/kubernetes-policy-enforcement" rel="noopener">论文</a>，概述了在Kubernetes中执行政策所面临的挑战以及不执行政策的负面后果。它详细介绍了哪些策略是必不可少的以及如何创建它们，并提供了如何实施策略的信息。</p>
<p>本白皮书非常适合管理多用户、集群和租赁环境的工程和DevOps领导者。</p>
<p>寻找一个完整的Kubernetes治理平台？Fairwinds Insights是免费的。今天就开始吧。</p>
<p><span class="hs-cta-wrapper" id="hs-cta-wrapper-397d414a-d137-4f8e-9cfc-f6f2363bf2ad"><span class="hs-cta-node hs-cta-397d414a-d137-4f8e-9cfc-f6f2363bf2ad" id="hs-cta-397d414a-d137-4f8e-9cfc-f6f2363bf2ad"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/397d414a-d137-4f8e-9cfc-f6f2363bf2ad"><img class="hs-cta-img" id="hs-cta-img-397d414a-d137-4f8e-9cfc-f6f2363bf2ad" src="../Images/154350e87174c62c0f2d20e8a08d9722.png" alt="New call-to-action" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/397d414a-d137-4f8e-9cfc-f6f2363bf2ad.png"/></a></span>T6】</span></p></span></div>    
</body>
</html>