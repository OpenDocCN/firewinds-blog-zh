<html>
<head>
<title>Monitoring and Logging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>监控和记录</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/monitoring-and-logging#2020-01-06">https://www.fairwinds.com/blog/monitoring-and-logging#2020-01-06</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>在我的运营生涯中，我有过很多关于监控和日志记录的争论。许多争论都集中在我想监控和记录“太多”的想法上。这不一定是错误的，但我一直认为它更像是“监控和记录一切”</p>

<p>原因很简单。当(不是“如果”)出现问题时，您将需要数据来帮助理解和排除故障。如果你不监控和记录所有的事情，那么你将永远至少部分地处于黑暗中。我确信哲学上的争论是关于永远不能真正监控一切…但我认为重点是明确的。</p>
<h2>关于关键绩效指标的问题</h2>
<p>也就是说，并不是你收集的每个数据点都是关键绩效指标(KPI ),你也不需要为每个数据点设置警报。您也不需要将所有数据保留30年。如果有意义，保留你的KPI更长时间。举例来说，你的应用程序的平均响应时间可能在一年后仍然有用，但是web服务器的磁盘利用率可能就没那么有用了。</p>
<p>我们还经常被要求推荐和实施监控。这很简单。使用类似于<span> </span> datadog <span> </span>和<span> </span> loggly的服务。</p>
<h2>监控和日志服务</h2>
<p>除非您的核心业务是监控/日志记录，否则您应该将此成本汇的管理工作留给真正关心它的人，因为这是他们的业务。你永远不会从监控中赚钱，与其转移你的宝贵资源，不如利用这些资源来创收。</p>
<p>有一个例外，那就是规模。当您运行大量系统时，许多监控和日志记录服务会变得非常昂贵。在这种情况下，规模经济可能有利于整合定制解决方案。</p>
<p>与古老的<span> </span> <a href="https://www.nagios.org/" target="_blank" rel="noopener"> Nagios </a> <span> </span>和它的forks相比，<a href="https://sensuapp.org/" target="_blank" rel="noopener"> Sensu </a> <span> </span>是一个很好的警报工具，在有短暂机器的云环境中工作得更好。最大的原因是基于订阅的客户端监控和比Nagios更容易分配负载的能力。与Nagios非常相似，Sensu没有提供跟踪和绘制收集的数据点的方法。也喜欢Nagios，不难补充。一个不错的选择就是<span/><a href="https://influxdata.com/" target="_blank" rel="noopener">InfluxDB</a><span/>搭配<span> </span> <a href="http://grafana.org/" target="_blank" rel="noopener"> Grafana </a>。<span> </span> <a href="https://graphiteapp.org/" target="_blank" rel="noopener">石墨</a> <span> </span>是代替InfluxDB的另一种选择，但是更难设置和维护。</p>
<p>在伐木方面，最大的打击者是<span> </span> <a href="https://www.elastic.co/products" target="_blank" rel="noopener">麋鹿栈</a>。没有太多的大惊小怪，你可以聚集你所有的日志，并通过搜索和可视化处理它。还有一个非常好的社区可以帮助解析和分析日志格式。</p>
<h2>最后</h2>
<p>最终归结为成本。有许多设备要监控，许多日志要汇总，您可能会考虑自己运行。随着规模的扩大，服务成本会迅速增加。只是一定要记住，虽然你可以免费运行一些非常好的工具，但设置和维护仍然需要进行。如果你有员工和技能，让这不成问题的去做吧。否则，您将更好地专注于您的产品并创造收入，而不是冒险进入监控、日志记录和指标收集的兔子洞。</p></span></div>    
</body>
</html>