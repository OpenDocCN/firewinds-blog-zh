<html>
<head>
<title>Don’t Forget to Check Kubernetes Pod SecurityContext for readOnlyRootFilesystem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>不要忘记检查Kubernetes Pod SecurityContext中的readOnlyRootFilesystem</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/dont-forget-to-check-kubernetes-pod-securitycontext-for-readonlyrootfilesystem#2022-12-05">https://www.fairwinds.com/blog/dont-forget-to-check-kubernetes-pod-securitycontext-for-readonlyrootfilesystem#2022-12-05</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>在Kubernetes中运行安全的工作负载具有挑战性。Kubernetes使工程师能够使用<strong> securityContext </strong>字段配置容器的安全特性。使用这个Kubernetes安全上下文来保护pods可以确保每个资源都拥有它所需要的权限，同时也避免了过度许可的陷阱。安全上下文在粒度级别上定义权限，始终遵循最小特权原则。也就是说，您可以使用安全上下文定义的许多安全规则也可以通过pod安全策略来配置，这不是同一个工具。</p>

<p>为什么两者都有？因为安全上下文是pod安全策略的替代品，而pod安全策略可用于为Kubernetes集群中运行的所有pod配置权限，所以与可应用于单个pod的安全上下文相比，安全上下文提供的控制粒度更小。</p>
<h3><span>安全Pod策略</span></h3>
<p>Kubernetes中的pod安全策略是一个集群级资源，它控制pod规范的安全敏感方面。这些策略定义了运行系统将接受的pod所需的一组条件，以及相关字段的默认值。虽然<a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritypolicy-v1beta1-policy" rel="noopener" target="_blank"><span>PodSecurityPolicies</span></a>通过启用准入控制器来实施，但是如果最初没有授权适当的策略，则不会在集群中创建pods。</p>
<p>控制容器是否能够写入其文件系统的一个设置是<strong> readOnlyRootFilesystem </strong>，如果可能的话，您肯定希望启用该功能，以便为您的容器化工作负载提供额外的深度防御。如果攻击者或不良分子设法破坏集群，<strong> readOnlyRootFilesystem </strong>将防止他们篡改应用程序或将可执行文件写入磁盘。</p>
<h3><span>最佳实践</span></h3>
<p>Kubernetes安全最佳实践提供了关于如何为pod或容器配置readOnlyRootFilesystem的指南。是的，这个特性对于Kubernetes的安全性至关重要，但是如果用户没有部署一个将<strong> securityContext </strong>设置为<strong> readOnlyRootFilesystem </strong>的pod，会发生什么呢？在理想的情况下，您的团队能够识别这个问题并应用适当的策略。最糟糕的情况是，您的pod被破坏和损害，这意味着需要立即识别未以只读方式运行的pod。</p>
<h3><span>具有洞察力的自动检查</span></h3>
<p><span>手动检查每个pod的<strong>安全上下文</strong>有一个问题——很容易出现人为错误，更不用说这非常耗时。使用策略执行工具自动化该过程可以大大降低Kubernetes的安全风险。</span></p>
<p><span> <a href="https://www.fairwinds.com/?utm_source=adwords&amp;utm_medium=ppc&amp;utm_term=fairwinds%20insights&amp;utm_campaign=Branded&amp;hsa_cam=9424392662&amp;hsa_mt=b&amp;hsa_ver=3&amp;hsa_src=g&amp;hsa_ad=563830028156&amp;hsa_net=adwords&amp;hsa_tgt=kwd-1494176964684&amp;hsa_acc=8748715703&amp;hsa_grp=95380032853&amp;hsa_kw=fairwinds%20insights&amp;gclid=Cj0KCQjwmPSSBhCNARIsAH3cYgaPoOyVSV-nbYaNz0HZU3dn674AJngFY8ikP4-XoMPLKLYf1_q2B4UaApowEALw_wcB"> Fairwinds Insights </a>，我们的SaaS治理平台为Kubernetes提供解决方案。作为一个策略驱动的配置验证平台，Insights帮助负责Kubernetes的团队识别何时设置了不正确的安全上下文。Fairwinds Insights的客户可以在</span>流程的每个阶段实施这些护栏和反馈循环——在拉动请求、部署时，以及针对集群中已部署的工作负载。</p>
<blockquote>
<p>您可以永远免费使用Fairwinds Insights。<a href="https://www.fairwinds.com/coming-soon"> <span>拿到这里</span> </a>。</p>
</blockquote>
<p>根据您组织的要求，Fairwinds Insights会自动扫描集群，以检查缺失的安全上下文。这意味着您的团队可以节省定位特权容器的时间，这些时间可用于修复问题。</p>
<p>安装Insights代理后，您将在10分钟内收到结果。当<strong>security context . readonlyrootfilesystem</strong>不为真时，Insights会给出警告。Fairwinds Insights还确保在整个部署过程中执行策略，因此为每个pod设置了安全上下文。这一举措通过扫描从CI/CD到生产的配置，减少了安全事故。Insights还致力于确保整个企业的所有团队都遵循Kubernetes安全最佳实践。</p>
<p><span class="hs-cta-wrapper" id="hs-cta-wrapper-d329e036-9905-4715-85b8-31a98b50623c"><span class="hs-cta-node hs-cta-d329e036-9905-4715-85b8-31a98b50623c" id="hs-cta-d329e036-9905-4715-85b8-31a98b50623c"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/d329e036-9905-4715-85b8-31a98b50623c"><img class="hs-cta-img" id="hs-cta-img-d329e036-9905-4715-85b8-31a98b50623c" src="../Images/90e93a941f22f2087c3a229a91ea6c10.png" alt="Fairwinds Insights is Available for Free Sign Up Now" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/d329e036-9905-4715-85b8-31a98b50623c.png"/></a></span>T6】</span></p></span></div>    
</body>
</html>