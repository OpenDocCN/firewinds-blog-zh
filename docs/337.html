<html>
<head>
<title>Announcing Polaris Snapshot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>宣布北极星快照</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/announcing-polaris-snapshot#2022-12-05">https://www.fairwinds.com/blog/announcing-polaris-snapshot#2022-12-05</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><div><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">Two months ago at Fairwinds</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z s-lparen"> </span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z h-lparen">(formerly</span><span class="author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> ReactiveOps), </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">we launched Polaris</span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">, an </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><a target="_blank" class="attrlink" data-target-href="https://github.com/FairwindsOps/polaris" href="https://github.com/FairwindsOps/polaris" rel="nofollow noopener">open source dashboard</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> for auditing Kubernetes workload configuration. We saw a great response from the community, and have been hard at work keeping up with all the interesting ideas and use cases that have come in since launch.</span></div>

<p> </p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">例如，一个常见的反馈是，虽然Polaris非常擅长审计实时集群中的工作负载，但许多人希望能够在问题被签入他们的基础架构即代码存储库之前发现问题。所以我们修改了Polaris来审计本地YAML文件，并添加了几个新的标志来简化CI/CD。现在您可以在您的CI/CD管道中运行这样的东西:</span></p>
<p><code class="listtype-code listindent1 list-code1 lang-cpp" spellcheck="false"><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">polaris --audit-path ./deploy --set-exit-code-on-error -set-exit-code-below-score 90</span></code></p>
<p>如果Polaris检测到任何错误级别的问题，或者如果您的Polaris得分下降到90%以下，管道将会失败。</p>
<p> </p>
<div><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">However, there was one useful feature we found difficult to implement: an easier way to share Polaris reports. To help address this need, we’re excited to announce a new service: </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><a target="_blank" class="attrlink" data-target-href="https://fairwinds.com/polaris-snapshot" href="https://fairwinds.com/polaris-snapshot" rel="noopener">Polaris Snapshot</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">. Polaris Snapshot will let you generate a report, hosted at </span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span>polaris.fairwinds.com</span></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">, that you can share with your team. We see this as a great way for teams to sync on how to make their Kubernetes workloads more stable, efficient, and secure.</span></div>
<p> </p>
<p> </p><h2 data-usually-unique-id="040671135560509482432809"><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">为什么是北极星？</span></h2>

<p>在Fairwinds，我们与几十个开发团队合作，将数百个应用程序发布到Kubernetes集群中。通常，我们承担与集群本身相关的工作 <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z s-lparen"> </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z h-lparen">(例如</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">处理集群升级，维护工具，如入口和证书管理，响应中断)，而开发团队负责需要应用上下文的一切</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z s-lparen"> </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z h-lparen">(例如</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">编写部署配置，设置CI/CD)。但是对于不完全熟悉Kubernetes的开发人员来说，很容易忽略应用程序的Kubernetes配置的一些关键部分。</span></p>
<p> </p>
<p>例如，您的部署在没有准备就绪和活动探测的情况下，或者在没有资源请求和限制的情况下，可能看起来工作得很好。但是如果没有这种配置，Kubernetes就很难做它最擅长的事情——确保您的应用程序保持健康并高效地伸缩。我们帮助团队应对的许多中断和性能下降都是由一些问题引起的，这些问题可以通过构建更坚固的应用程序配置来轻松避免。</p>
<p> </p>
<p>北极星旨在缓解平台工程团队和应用开发团队之间的这种交接。 <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">我们专门针对可能导致扩展性、稳定性、效率和安全性问题的应用配置问题。Polaris得分每增加一分，您经历停机、安全漏洞或性能下降的机会就会减少一分。</span></p>
<p> </p>
<p> </p><h2 data-usually-unique-id="656996816733002288548763"><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">为什么要拍北极星快照？</span></h2>

<p>一旦我们完成了Polaris，是时候在我们客户的集群中实际运行它了。在会议前设置一个临时仪表板很容易，但是我们不想让一个不必要的流程在每个客户的环境中运行，不管它有多小和多便宜。并且报告会根据新的部署而改变的事实可能会导致误解。</p>
<p> </p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">我们需要的是一种生成一次性报告的方式，即特定时间点的集群状态快照。这份报告可以被保存、传阅和讨论，因为我们制定了一个计划来优先处理Polaris发现的问题。</span></p>
<p> </p>
<p>不幸的是，在Kubernetes中安全地维护持久状态 <span class="thread-866424210580075337222779 author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> c </span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">可能会很复杂，所以像这样的特性似乎超出了开源项目的范围。我们尝试简单地将仪表板保存为PDF格式，并展开每个警报。结果还可以，但是对于一些客户来说，导致报告长达几十页，很难浏览。</span></p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> </span></p>
<p>最后，我们选择了北极星快照作为发布北极星报告的方式。这不仅解决了我们眼前的问题——它还推进了Fairwinds的使命，使组织能够轻松地操作生产级Kubernetes集群。</p>
<p> </p>
<p><span class="ace-all-bold-hthree"> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> <strong>它是怎么工作的？</strong> </span> </span></p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">北极星快照运行于</span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span/></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z s-lparen"/><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z h-lparen">(注:</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> </span> <span class="thread-221416630426798637601520 author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">您需要输入您的电子邮件地址以</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">生成报告。虽然我们不能为您提供免费午餐，但我们承诺尊重您的收件箱)。当您到达时，Snapshot将为您生成一个新的会话，它是一个长的、唯一的ID。然后你会看到一个</span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span>kubectl</span></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">命令运行，类似于:</span></p>
<p><code class="listtype-code listindent1 list-code1 lang-ruby" spellcheck="false"><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">kubectl apply -f https://polaris.fairwinds.com/session/e0475993dc407007418319ca468d25ff/yaml</span></code></p>
<p> </p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">该命令将下载北极星，运行一次，将结果发送回</span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span/></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">，然后自行卸载。我们建议在将YAML文件传递给</span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span>ku bectl apply</span></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">之前检查它——您会看到Polaris只需要最低限度的RBAC权限，并且在一个临时的、唯一的名称空间中运行。</span></p>
<p> </p>
<p><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">一旦审计完成并且Polaris从您的集群中卸载，您的报告结果将自动出现在https://polaris.fairwinds.com/session/YOUR_SESSION_ID</span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span/></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">。您可以与您的队友分享此链接，以帮助协调和优先考虑补救工作。该网址将在90天内保持有效，之后我们将完全删除您的数据。您也可以随时手动删除数据。</span></p>
<p> </p>
<p> </p><h2 data-usually-unique-id="662699620619095393643621"><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">未来工作</span></h2>

<div><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">We’ve got big plans for Polaris in the future. We’ve just published the </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><a target="_blank" class="attrlink" data-target-href="https://github.com/FairwindsOps/polaris/blob/master/ROADMAP.md#q3-2019" href="https://github.com/FairwindsOps/polaris/blob/master/ROADMAP.md#q3-2019" rel="noreferrer nofollow noopener">Q3 Roadmap</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">, which includes a few exciting new features:</span></div>
<ul class="listtype-bullet listindent1 list-bullet1">
<li>我们将开始检查更多类型的资源，而不仅仅是部署——我们将支持StatefulSets、Jobs、CronJobs和DaemonSets。</li>
<li>我们将添加对豁免的支持，这将允许您指定，例如，您的一个部署确实需要以root用户身份运行。如果你给它一个豁免，这将不再影响你的北极星分数。</li>
<li><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">我们将在</span> <span class="thread-910906943899286402326536 author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">探讨让你创建</span> <span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">自己定制北极星支票的方法</span></li>
</ul>
<p> </p>
<div><span class="thread-234155698648794908771691 author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">We’re also quite interested in expanding <a href="/polaris-snapshot" rel="noopener" target="_blank">Polaris Snapshot</a> to include features that are difficult to implement as part of an open source project - things like saving report history, multi-cluster management, and email/Slack alerts for degradations. </span></div>
<p> </p>
<div><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">If you’re interested in Polaris and would like to help us plot the course forward, reach out to </span><span class="inline-code author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><span>opensource@fairwinds.com</span></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"> or get in touch </span><span class="attrlink url author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z"><a target="_blank" class="attrlink" data-target-href="https://github.com/FairwindsOps/polaris" href="https://github.com/FairwindsOps/polaris" rel="noreferrer nofollow noopener">on GitHub</a></span><span class=" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxw4z74zjbnz71zz87zz88zyj0flp65idsz83zz82zz87zz87zuz72zz86zz90ztgz81z">!</span></div>
</span></div>    
</body>
</html>