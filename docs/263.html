<html>
<head>
<title>Kubernetes CVE-2020-8554: Instructions to Identify if You’re Impacted</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Kubernetes CVE-2020-8554:识别您是否受到影响的说明</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/kubernetes-cve-2020-8554-instructions-identify-impacted#2022-12-08">https://www.fairwinds.com/blog/kubernetes-cve-2020-8554-instructions-identify-impacted#2022-12-08</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>一个新的中等严重程度的CVE被发现(CVE-2020-8554)影响多租户库伯内特星团。如果潜在的攻击者已经可以创建或编辑服务和pod，那么他们可能能够拦截来自集群中其他pod(或节点)的流量。关于CVE的公告解释说:</p>

<p>能够创建ClusterIP服务并设置spec.externalIPs字段的攻击者可以拦截到该IP的流量。能够修补负载平衡器服务的状态(这被视为特权操作，通常不应授予用户)的攻击者可以将status.loadBalancer.ingress.ip设置为类似效果。</p>
<p>这个问题是一个设计缺陷，如果不进行面向用户的更改，就无法缓解。"</p>
<p>与任何CVE一样，第一步是确定您是否受到影响。为了帮助Kubernetes用户，我们使用我们的配置验证软件<a href="https://insights.fairwinds.com/auth/register/"><span>fair winds Insights</span></a>(免费使用30天)和<a href="https://github.com/open-policy-agent/gatekeeper" rel="noopener" target="_blank"> <span> OPA </span> </a>创建了识别CVE-2020-8554的说明。按照这些说明，您不需要以前使用过OPA。此外，通过使用Insights准入控制器，您实际上可以防止这种CVE被引入到新部署中。</p>
<p>Fairwinds Insights是一个策略驱动的平台，可强制执行自定义策略，如识别集群中的CVE，通过在CI/CD阶段或作为准入控制器的开放策略代理(OPA)集成，自动部署护栏和安全最佳实践。</p>
<h2>在集群中识别CVE-2020-8554的说明</h2>
<h3>注册Fairwinds Insights</h3>
<p>如果你是Fairwinds Insights的新手，你需要注册并安装代理——遵循<a href="/fairwinds-insights-get-started" rel="noopener">入门指南</a>。</p>
<h3><span>安装Insights-cli </span></h3>
<p>遵循Insights CLI安装<a href="https://github.com/FairwindsOps/insights-cli#installation"> <span>指令</span> </a>。</p>
<ul>
<li>
<p>如果在mac上，运行<span> <code>brew install FairwindsOps/tap/insights</code> </span></p>
</li>
<li>
<p>如果不是在Mac上，或者没有自制软件，从<a href="https://github.com/FairwindsOps/insights-cli/releases" rel="noopener" target="_blank"> <span>版本</span> </a>页面下载二进制文件，并将其添加到您的路径中</p>
</li>
</ul>
<h3><span>复制示例策略</span></h3>
<p>下载<a href="https://github.com/FairwindsOps/insights-plugins"> <span>洞见-插件</span> </a>资源库。在该存储库内的路径<span> <code>plugins/opa/examples</code> </span>中，您将找到所有用于Fairwinds Insights的模板化OPA策略。将<span> <code>plugins/opa/examples/lb-vuln-cve-2020-8554</code> </span>复制到你的本地目录。</p>
<p>查看<a href="https://insights.docs.fairwinds.com/reports/opa/" rel="noopener"> Fairwinds Insights文档</a>了解有关OPA政策的更多信息。</p>
<h3><span>找到您的管理令牌</span></h3>
<p>登录<a href="https://insights.fairwinds.com/"><span>fair winds Insights</span></a>，选择您的组织，然后点击菜单栏中的设置。向下滚动到认证令牌部分，并单击<span> <code>Show Tokens</code> </span>按钮。复制标题为<span> <code>admin</code> </span>的令牌，打开命令提示符，粘贴到:<span> <code>export FAIRWINDS_TOKEN= &lt;token you copied&gt;</code> </span></p>
<h3><span>运行命令</span></h3>
<p>从您复制策略的目录中，运行以下命令:<span> <code>insights policy sync --organization &lt;Insights org name&gt;</code> </span></p>
<h3><span>安装OPA报告</span></h3>
<p>登录<a href="https://insights.fairwinds.com/"><span/></a>并导航至您想要检查的集群<span>。</span> <span>从那里开始，遵循以下步骤:</span></p>
<img src="../Images/89d7fc34cb44f571ddedc4e5cf566226.png" alt="screenshot of OPA No reports - Apply custom policies to Kubernetes resources - available" data-original-src="https://lh6.googleusercontent.com/TCFzLC29oSv4N-84Keetnqa88NyI3Oz1sRWc4NKLAaRlxrM72c_jIgwTEHXYoQFYlMTU95JYxeYyn6_y9GwWiJNNjlBZ8GHy2XcEIuFSLeNuoERgn1tcJNn-RTR4E0Jd0-6ghmle"/><br/>
<ol>
<li><span>导航至报告中心菜单</span></li>
<li>
<p>添加开放策略代理(OPA)报告</p>
</li>
<li>
<p>您将在屏幕的右上角看到一个“准备重新安装”链接。单击此链接获取可用于重新安装Fairwinds Insights代理的helm命令。</p>
</li>
</ol>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>大约一分钟后，您应该会在Fairwinds Insights的行动项目表中看到任何受影响的资源。</p>
<p><img src="../Images/27cd2555aedc83338ce3d1171e64d7c5.png" alt="Screen shot of Fairwinds Insights Action Items" data-original-src="https://lh4.googleusercontent.com/bZN6uVx6vCMQYqQjk7ubl1FEZw6RA0A3mCB6viaCNR1_OZLNXqdffV5nlP6UbBuEAukJ4CS9o5ZIt2J-mFcYmya8bNioC12c29QegnqG3tmndPOyDq60criSDD4hPZGWWQ8Yue4I"/></p>
<p>借助Fairwinds Insights，您将能够识别并防止CVE-2020-8554成为您团队的问题。您可以永远免费使用Fairwinds Insights。拿过来<a href="/coming-soon" rel="noopener">这里</a>。</p>
<p><span class="hs-cta-wrapper" id="hs-cta-wrapper-d83db0e5-9dba-4c27-a19a-f0872a030500"><span class="hs-cta-node hs-cta-d83db0e5-9dba-4c27-a19a-f0872a030500" id="hs-cta-d83db0e5-9dba-4c27-a19a-f0872a030500"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/d83db0e5-9dba-4c27-a19a-f0872a030500"><img class="hs-cta-img" id="hs-cta-img-d83db0e5-9dba-4c27-a19a-f0872a030500" src="../Images/3f878a33bc4aeb315050877041d679ae.png" alt="Kubernetes Policy Enforcement Fairwinds Insights" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/d83db0e5-9dba-4c27-a19a-f0872a030500.png"/></a></span>T6】</span></p></span></div>    
</body>
</html>