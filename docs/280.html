<html>
<head>
<title>Why Aren't You Following These 5 Kubernetes Best Practices?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>你为什么不遵循这5个Kubernetes最佳实践？</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/why-arent-you-following-these-5-kubernetes-best-practices#2023-01-13">https://www.fairwinds.com/blog/why-arent-you-following-these-5-kubernetes-best-practices#2023-01-13</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>随着容器成为开发和部署云原生应用程序的标准方法，许多组织正在采用Kubernetes作为他们用于容器编排的解决方案。最近的<a href="https://www.cncf.io/wp-content/uploads/2022/02/CNCF-AR_FINAL-edits-15.2.21.pdf" rel="noopener" target="_blank">云本地计算基金会(CNCF)调查</a>显示，96%的受访者正在使用或评估Kubernetes，93%的受访者正在生产环境中使用Linux容器。换句话说，容器和Kubernetes正在变得流行，特别是在非洲等新兴技术中心，那里许多人正在寻求Kubernetes部署，其中73%已投入生产。不仅新兴公司采用这些技术，大公司也是如此——通常比小公司更多。但是这是否意味着这些公司正在遵循Kubernetes最佳实践的基础呢？有时候…</p>
<p>很多时候，组织在没有完全理解成功部署Kubernetes所固有的复杂性的情况下就急于采用它。许多团队刚刚开始理解控制平面，调度器做什么，Kubernetes中的节点如何工作，kubelet做什么，daemonsets是什么，Kube如何改变软件开发生命周期。理解Kubernetes集群，使用Kube instrumentation跟踪哪些指标以及如何进行跟踪，以及进行故障排除以发现问题的根本原因，这些对于大多数组织来说仍然是一个挑战。</p>
<p>无论您是否仍在考虑何时以及如何实施Kubernetes来部署SaaS解决方案和其他应用程序和服务，或者您已经有了K8s，通过采用监控系统和建立监控指标来应用Kube最佳实践来帮助您创建流程、明确任务和设置优先级都不会太晚。CNCF指导许多开源项目，使其易于采用Kube和优化云原生架构。</p>
<p>Prometheus是一个开源的系统监控解决方案，它以时间序列数据的形式收集和存储指标，并提供警报。监控工具和监控解决方案对于帮助开发运维团队解决分布式系统中的问题至关重要。所以，让我们后退一步，看看今天你需要关注的五大Kubernetes实践，以帮助你最大化K8s可以提供的长期价值。</p>
<h2><span> 1。Kubernetes安全-最佳实践</span></h2>
<p>安全性始终是技术的重要组成部分，Kubernetes也不例外。人们的一个常见误解是认为K8s在默认情况下是安全的。这听起来很棒，但事实并非如此。Kubernetes通过平衡速度和弹性来管理无状态微服务在集群中的运行方式，这可以使开发人员在部署软件时更加灵活。然而，如果您在Kubernetes部署中没有适当的治理和风险控制，这些好处就不会没有安全风险。</p>
<p>当您的K8s部署顺利运行时，您可能会认为一切都配置正确。不幸的是，过度许可是一种简单的方法，可以让你正在努力解决的事情发挥作用。授予root访问权限可以解决许多难题，但同时也会使您的组织面临拒绝服务(DoS)攻击或安全漏洞。事实上，错误配置是Kubernetes环境中最具挑战性的概念之一。即使是很小的错误配置，特别是以根级别访问运行的容器，也越来越成为网络攻击者寻找的漏洞。这些安全配置在Kubernetes中不是默认设置的，它们是您的安全团队必须建立的设置，然后通过自动化和策略来实施。</p>
<h2><span> 2。Kubernetes成本优化-最佳实践</span></h2>
<p>大多数组织采用Docker容器和容器编排解决方案，因为它们在基础设施利用方面天生高效。很简单，容器化环境允许您在每台主机上运行多个应用程序——每个应用程序都在自己的Docker容器中。这有助于您减少所需的计算实例总数，从而降低基础架构成本，而不会牺牲功能或应用程序性能。</p>
<p>Kubernetes动态适应您的工作负载的资源利用率，并允许自动扩展(使用<a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/" rel="noopener" target="_blank"> <span> </span> <span>水平Pod自动缩放器或HPA </span> </a>)和集群扩展(使用<a href="https://github.com/kubernetes/autoscaler" rel="noopener" target="_blank">集群自动缩放器</a>)以提供可伸缩性。Kubernetes允许您设置资源请求和工作负载限制，以便您可以最大限度地提高基础设施利用率，同时确保您的应用程序性能平稳。听起来很棒，对吧？只有在正确设置Kubernetes资源限制和请求的情况下。如果您的内存限制太低，K8s会因为违反限制而终止您的应用程序，但是如果您将限制设置得太高，您会过度分配资源——换句话说，您会付出比您需要的更多的代价。弄清楚<a href="https://www.fairwinds.com/blog/how-to-correctly-set-resource-requests-and-limits"> <span> </span> <span>正确的资源限制和要求</span> </a>是具有挑战性的，对于Kubernetes的新采用者和已经使用Kube多年的组织都是如此。</p>
<h2><span> 3。Kubernetes可靠性-最佳实践</span></h2>
<p>可靠性永远是目标，但实现<a href="https://www.fairwinds.com/blog/you-can-establish-reliable-kubernetes-clusters-without-losing-sleep"> <span> </span> <span> Kubernetes可靠性</span> </a>是一项复杂的任务。优化Kubernetes需要技巧，特别是如果您使用的技术早于云原生应用程序和配置管理工具，它们并不总是提供最可靠的云原生体验。许多组织继续使用旧的解决方案，并在此基础上构建Kubernetes，但这使得优化、可靠性和可伸缩性更难实现，尤其是当您的业务扩展时。确保集群可靠性的一个很好的方法是转而使用<a href="https://www.techtarget.com/searchitoperations/definition/Infrastructure-as-Code-IAC" rel="noopener" target="_blank"> <span> </span> <span>基础设施作为代码</span> </a> (IaC)，这有助于减少人为错误，提高一致性和可重复性，提高可审计性，并使灾难恢复更容易。它还可以帮助您解决Kubernetes工作负载中的性能问题。</p>
<h2><span> 4。Kubernetes政策执行-最佳实践</span></h2>
<p>采用Kubernetes的一个常见方法是用一个应用程序进行试验，这是一个很好的开始方式。但是，一旦您的组织承诺在多个应用程序、开发团队和操作团队中使用Kube，那么为部署不一致的工作负载管理集群配置就变得非常困难。当您的团队没有关于如何部署应用程序和服务的护栏时，您会很快发现您的容器和集群之间的配置存在差异。这些差异很难识别、纠正和保持一致。手动识别这些错误配置非常困难。</p>
<p>要管理多集群环境，您需要建立<a href="https://www.fairwinds.com/blog/kubernetes-policy-enforcement-for-developers"> <span> </span> <span> Kubernetes策略</span> </a>来实施一致的安全性、效率和可靠性配置。虽然策略可以实现全面的最佳实践，但有些策略可能特定于您的组织或环境。最佳实践文档似乎是管理这些策略的好方法，但是它可能很快就半途而废了。采用Kubernetes <a href="https://www.fairwinds.com/insights"> <span> </span> <span>策略实施工具</span> </a>可以帮助您防止常见的错误配置被发布，实现IT合规性，并使您的团队能够充满信心地交付——因为他们知道有护栏来实施您的策略。</p>
<h2><span> 5。Kubernetes监控&amp;警报-最佳实践</span></h2>
<p>Kubernetes监控配置通常是事后才想到的——许多组织直到出现问题时才考虑设置它们。但是优化Kubernetes监控和警报可以帮助您确保您的基础设施和应用程序正常运行，这需要您使用正确的工具来优化您的监控功能。可观察性与监控密切相关，因为实时观察系统的能力有助于您关联数据以报告系统的健康状况，监控关键指标，调试生产环境，并提前预防停机。Kubernetes监控工具，特别是那些提供Kubernetes仪表板的工具，可以跟踪Kubernetes pods、Kubernetes节点和Kubernetes服务，是全面监控策略的一部分。在Kubernetes平台中需要跟踪的几个关键Kubernetes指标包括:</p>
<ul>
<li aria-level="1">
<p><span>内存使用量</span></p>
</li>
<li aria-level="1">
<p><span>名称空间</span></p>
</li>
<li aria-level="1">
<p><span>资源指标</span></p>
</li>
<li aria-level="1">
<p><span>资源使用量</span></p>
</li>
<li aria-level="1">
<p><span>资源利用率</span></p>
</li>
<li aria-level="1">
<p><span>内存分配</span></p>
</li>
<li aria-level="1">
<p><span> CPU使用率</span></p>
</li>
</ul>
<p>像<a href="https://grafana.com/"><span/><span><span>Grafana</span></span></a>这样的工具可以帮助您可视化应用指标和应用性能。使用开源工具可以帮助您避免局限于单一云提供商，如AWS、Azure、Google Cloud Platform等。集成可以帮助最终用户提高kube使用率，减少延迟，从而优化可扩展性，最大限度地减少重启，并改善用户体验。监控Kubernetes API服务器使团队能够了解集群组件之间的通信。</p>
<p>对于大多数团队来说，这意味着您需要考虑需要监控什么以及为什么要监控——确定Kubernetes监控最佳实践对您的组织来说是什么样的。了解哪些配置存在风险或浪费资源，尽早发现安全性和合规性风险，并在部署前发现错误配置，可以帮助您尽早解决问题并防止许多可能的问题。</p>
<h2><span>你今天应该做的5个Kubernetes最佳实践</span></h2>
<p>安全性、成本优化、可靠性、策略执行以及Kubernetes监控和警报都很复杂。虽然Kubernetes提供了许多组织越来越多地采用和利用的功能，但它们也要求您的部署在部署级别和集群级别都能很好地工作。对于许多采用Kube的团队来说，甚至对于那些已经有了Kube的团队来说，在实现这些Kubernetes最佳实践时，都很难知道从哪里开始。</p>
<p>Kubernetes可以让您的组织提高容器的效用和生产率，并构建可以在任何地方运行的云原生应用程序。为了最大化您的Kubernetes实现，确保您遵循这五个Kubernetes最佳实践是至关重要的。有了正确的技术和Kubernetes guardrails，您将能够实现构建可扩展、高效的云原生应用的承诺，这些应用可以在任何地方可靠、安全地运行，而不受特定于云的要求的影响。</p>
<p><span>深入了解<a href="https://www.fairwinds.com/kubernetes-best-practices-comprehensive-white-paper"> Kubernetes最佳实践</a>的细节——立即阅读这份白皮书。</span></p>
<p><span><span class="hs-cta-wrapper" id="hs-cta-wrapper-34aa4987-a1f9-438a-a145-d7d82d5c479a"><span class="hs-cta-node hs-cta-34aa4987-a1f9-438a-a145-d7d82d5c479a" id="hs-cta-34aa4987-a1f9-438a-a145-d7d82d5c479a"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/34aa4987-a1f9-438a-a145-d7d82d5c479a"><img class="hs-cta-img" id="hs-cta-img-34aa4987-a1f9-438a-a145-d7d82d5c479a" src="../Images/7c86296320eb01b215d8e2755e9c5b9d.png" alt="Use Fairwinds Insights for Free Security, Cost and Developer Enablement In One" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/34aa4987-a1f9-438a-a145-d7d82d5c479a.png"/></a></span></span></span></p></span></div>    
</body>
</html>