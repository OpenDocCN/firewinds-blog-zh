<html>
<head>
<title>CVE-2022-0185: How to Identify at Risk Kernel Versions in Your K8S Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CVE-2022-0185:如何识别K8S集群中有风险的内核版本</h1>
<blockquote>原文：<a href="https://www.fairwinds.com/blog/cve-2022-0185-how-to-identify-at-risk-kernel-versions-in-your-k8s-cluster#2023-01-10">https://www.fairwinds.com/blog/cve-2022-0185-how-to-identify-at-risk-kernel-versions-in-your-k8s-cluster#2023-01-10</a></blockquote><div><span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>本周公布了Linux内核中的一个严重漏洞CVE-2022-0185。该漏洞使得本地攻击者能够造成拒绝服务(系统崩溃)或执行任意代码。</p>

<p>内核修复于1月18日发布，并在1月18日发布的最新Ubuntu AMIs中可用。</p>
<h2><strong>识别Kubernetes集群中的内核版本</strong></h2>
<p>如果您是Fairwinds Insights用户，您可以使用OPA策略检查集群中的内核版本。请注意，这将需要为OPA作业添加额外的访问权限，以便能够获取和列出节点。如果你还不是Fairwinds Insights的用户，你可以在这里免费注册<a href="/insights-pricing" rel="noopener"/>。我们可以让您使用该软件来帮助解决这一严重漏洞。</p>
<h2><strong>见解OPA政策</strong></h2>
<pre><code>package fairwinds

allowedKernelVersion(elem) {
    v := elem.parameters.kernelVersions[_]
    elem.status.nodeInfo.kernelVersion == v
}

unsupportedKernel[actionItem] {
    not allowedKernelVersion(input)
   
    actionItem := {
        "title": "Kernel Version is Unsupported ",
        "description": sprintf("kernel version %s is unsupported", [input.status.nodeInfo.kernelVersion]),
        "severity": 0.5,
        "remediation": "Update the base image version.",
        "category": "Security"
    }
}
</code></pre>
<p> </p>
<p>在你的<span> YAML </span>中，列出你将支持的版本。例如，如果在AWS中使用Ubuntu AMI，这个内核版本由使用AMI的节点报告:<span> <code>099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20220118</code> </span></p>
<p> </p>
<pre><code>parameters:
  kernelVersions:
    - 5.11.0-1027-aws
targets:
  - apiGroups:
      - ''
    kinds:
      - Node
</code></pre>
<p>您可以使用以下命令检查节点状态中报告的内核版本:</p>
<pre><code>kubectl get nodes -o jsonpath='{range .items[*]}{.metadata.name}{"\t"}{.status.nodeInfo.kernelVersion}{"\n"}{end}'
</code></pre>
<p><span class="hs-cta-wrapper" id="hs-cta-wrapper-34aa4987-a1f9-438a-a145-d7d82d5c479a"><span class="hs-cta-node hs-cta-34aa4987-a1f9-438a-a145-d7d82d5c479a" id="hs-cta-34aa4987-a1f9-438a-a145-d7d82d5c479a"><a href="https://cta-redirect.hubspot.com/cta/redirect/2184645/34aa4987-a1f9-438a-a145-d7d82d5c479a"><img class="hs-cta-img" id="hs-cta-img-34aa4987-a1f9-438a-a145-d7d82d5c479a" src="../Images/7c86296320eb01b215d8e2755e9c5b9d.png" alt="Use Fairwinds Insights for Free Security, Cost and Developer Enablement In One" data-original-src="https://no-cache.hubspot.com/cta/default/2184645/34aa4987-a1f9-438a-a145-d7d82d5c479a.png"/></a></span>T6】</span></p></span></div>    
</body>
</html>